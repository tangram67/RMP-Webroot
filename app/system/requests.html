<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<!--meta name="viewport" content="width=device-width, initial-scale=1"-->
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
		<meta name="description" content="Reference Music Player DSD FLAC WAV AIFF MP3 MP4 db Application">
		<meta name="keywords" content="Reference,Media,Player,DSD,FLAC,WAV,AIFF,MP3,MP4,Music,Entertainment">
		<meta name="copyright" content="Dirk Brinkmeier db Application">
		<meta name="author" content="Dirk Brinkmeier db Application">
		<meta name="google" content="notranslate">

		<title>RMP Web API requests</title>
		<link rel="icon" href="/favicon.ico">
		<link rel="manifest" href="/manifest.json" crossorigin="use-credentials">

		<!-- Normalizer (cross browser) stylesheet -->
		<link rel="stylesheet" href="/app/dist/css/normalize.min.css" integrity="sha384-VmMqkRP5QxUTFTuwFH4svmhLrcXsqWBQKfbzAUTHZPK5EvX+GMF5qSX2C2hUtEZM" crossorigin="anonymous">

		<!-- Use system fonts -->
		<link rel="stylesheet" href="/app/dist/css/system-fonts.min.css">

		<!-- Bootstrap core CSS -->
		<link rel="stylesheet" href="/comp/bootstrap/3.4.1/dist/css/bootstrap.min.css" integrity="sha384-HSMxcRTRxnN+Bdg0JdbxYKrThecOKuH5zCYotlSAcp1+c8xmyTe9GYg1l9a69psu" crossorigin="anonymous">
		<link rel="stylesheet" href="/comp/bootstrap/3.4.1/assets/css/ie10-viewport-bug-workaround.css" integrity="sha384-zCG85JND54HZlOj7juxUGcKAcGNauYMK7i9oIwSaXCaDlqAfcx7jG1B92vNpomOi" crossorigin="anonymous">
		<!-- Bootstrap theme -->
		<!--link rel="stylesheet" href="/comp/bootstrap/3.4.1/dist/css/bootstrap-theme.min.css" integrity="sha384-6pzBo3FDv/PJ8r2KRkGHifhEocL+1X2rVCTTkUfGk7/0pbek5mMa1upzvWbrUbOZ" crossorigin="anonymous"-->

		<!-- Bootstrap table stylesheet -->
		<link rel="stylesheet" href="/comp/bootstrap-table/1.17.1/dist/bootstrap-table.min.css" integrity="sha384-4k6aQN6RIQ6JYbvXXejqBZqRCA/nPGUExuhwH377tIB9b6FcP/ii0TnuSsiLsiwk" crossorigin="anonymous">
		<!-- Bootstrap radiobutton stylesheet -->
		<link rel="stylesheet" href="/comp/bootstrap-radiobutton/dist/css/bootstrap-radiobutton.min.css">
		<!-- Spinner stylesheet -->
		<link rel="stylesheet" href="/comp/bootstrap-spinner/dist/css/spinner.min.css" integrity="sha384-fpNIUS4ZxHO+CmiEO9y22yB+FRm7Uc5OZVTCRwNHXTpoNmS3K4Y9G7OjbMZ1Di6W" crossorigin="anonymous">

		<!-- Apple web application icons -->
		<link rel="apple-touch-icon" href="/images/logo144.png">
		<link rel="apple-touch-icon" sizes="36x36" href="/images/logo36.png">
		<link rel="apple-touch-icon" sizes="48x48" href="/images/logo48.png">
		<link rel="apple-touch-icon" sizes="72x72" href="/images/logo72.png">
		<link rel="apple-touch-icon" sizes="96x96" href="/images/logo96.png">
		<link rel="apple-touch-icon" sizes="144x144" href="/images/logo144.png">
		<link rel="apple-touch-icon" sizes="192x192" href="/images/logo192.png">

		<!-- Apple web application settings -->
		<link rel="apple-touch-startup-image" href="/images/logo192.png">
		<meta name="apple-mobile-web-app-title" content="Reference Music Player Control Interface">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-touch-fullscreen" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">

		<!-- Chrome, Firefox OS and Opera -->
		<meta name="theme-color" content="#0a0a0a">
		<!-- Windows Phone -->
		<meta name="msapplication-navbutton-color" content="#0a0a0a">
		<!-- iOS Safari -->
		<meta name="apple-mobile-web-app-status-bar-style" content="#0a0a0a">

		<!-- Callout format stylesheet -->
		<link href="/app/dist/css/callout.min.css" rel="stylesheet">
		<!-- Custom styles for this template -->
		<link href="/app/dist/css/theme.min.css" rel="stylesheet">

		<!-- Chart.js stylesheet -->
		<link rel="stylesheet" href="/comp/chartjs/dist/css/Chart.min.css" integrity="sha384-q9MZ/PQCC1nIFQdrr9yNOFXeSaXjv/yPOJOdBd32aODh8+EM6udfo91a6mRbEDih" crossorigin="anonymous">
		<link rel="stylesheet" href="/app/dist/css/chart-rendering.min.css">

		<!-- Overwrite Bootstrap 3.x.x styles with "Modern UI" design -->
		<link rel="stylesheet" href="/comp/bootstrap-flat/dist/css/bootstrap-flat.min.css" integrity="sha384-yO4TisELjypETHKc96LJ/UVXAbY0WU3qQDo5+GKzmntXSHI4TW3oh+esNtT4IT+Q" crossorigin="anonymous">
		<!-- Outlined "Modern UI" stylesheet -->
		<link rel="stylesheet" href="/app/dist/css/modern.min.css">
	</head>

	<!--body role="document" style="font-family: system-ui;"-->
	<body role="document">

		<!-- Fixed navbar -->
		<div id="main-menu-container">
			[[NAVBAR_MAIN_MENU]]
		</div> <!-- main-menu-container -->

		<div class="container theme-showcase" role="main" id="main-container">

			<div class="jumbotron">
				<table style="display: table; width: 100%;">
					<tbody>
						<tr>
							<td valign="middle"><img src="[[APP_LOGO]]"></td>
							<td valign="middle"><h1>[[APP_NAME]]</h1></td>
						</tr>
					</tbody>
				</table>
				<p>[[APP_HINT]]</p>
			</div>

			<div id="erroneous-header" class="page-header">
				<table style="display: table; width: 100%;">
					<tbody>
						<tr>
							<td valign="top">
								<h1 class="pageheadermargins">[[REQUESTS_HEADER]]</h1>
							</td>
							<td width="40px" valign="top"><h1 class="pageheadermargins">
								<a class="info-icon-static">
									<span class="glyphicon glyphicon-globe info-glyphicon-small" aria-hidden="true"></span>
								</a>
							</h1></td>
						</tr>
					</tbody>
				</table>
			</div>

			<div class="row">
				<div id="doughnut-report-group-1" class="col-sm-4">
					<ul class="list-group">
						<a id="doughnut-report-header-1" href="#" class="list-group-item active" onclick="onHeaderClick('doughnut-report-group-1');">Request Statistics (Top 3)<span id="doughnut-report-span-1" style="float:right; font-size: 16px;" class="glyphicon glyphicon-collapse-up text-right" title="Click to collapse or expand"></span></a>
						<div id="doughnut-report-items-1" class="sublinks">
							<li class="list-group-item"><canvas id="doughnut-report-1" class="chart-center chart-render"></canvas></li>
						</div>
					</ul>
				</div><!-- /.col-sm-4 -->
				<div id="doughnut-report-group-2" class="col-sm-4">
					<ul class="list-group">
						<a id="doughnut-report-header-2" href="#" class="list-group-item active" onclick="onHeaderClick('doughnut-report-group-2');">Request Statistics (Top 4)<span id="doughnut-report-span-2" style="float:right; font-size: 16px;" class="glyphicon glyphicon-collapse-up text-right" title="Click to collapse or expand"></span></a>
						<div id="doughnut-report-items-2" class="sublinks">
							<li class="list-group-item"><canvas id="doughnut-report-2" class="chart-center"></canvas></li>
						</div>
					</ul>
				</div><!-- /.col-sm-4 -->
				<div id="doughnut-report-group-3" class="col-sm-4">
					<ul class="list-group">
						<a id="doughnut-report-header-3" href="#" class="list-group-item active" onclick="onHeaderClick('doughnut-report-group-3');">Request Statistics (Top 5)<span id="doughnut-report-span-3" style="float:right; font-size: 16px;" class="glyphicon glyphicon-collapse-up text-right" title="Click to collapse or expand"></span></a>
						<div id="doughnut-report-items-3" class="sublinks">
							<li class="list-group-item"><canvas id="doughnut-report-3" class="chart-center"></canvas></li>
						</div>
					</ul>
				</div><!-- /.col-sm-4 -->
			</div><!-- /.row -->

			<div id="horizontal-report-group">
				<ul class="list-group">
					<a id="horizontal-report-header" href="#" class="list-group-item active" onclick="onHeaderClick('horizontal-report-group');">Request Statistics (Horizontal Chart)<span id="horizontal-report-span" style="float:right; font-size: 16px;" class="glyphicon glyphicon-collapse-up text-right" title="Click to collapse or expand"></span></a>
					<div id="horizontal-report-items" class="sublinks">
						<li class="list-group-item"><canvas id="horizontal-report"></canvas></li>
					</div>
				</ul>
			</div>

			<div id="vertical-report-group">
				<ul class="list-group">
					<a id="vertical-report-header" href="#" class="list-group-item active" onclick="onHeaderClick('vertical-report-group');">Request Statistics (Vertical Chart)<span id="vertical-report-span" style="float:right; font-size: 16px;" class="glyphicon glyphicon-collapse-up text-right" title="Click to collapse or expand"></span></a>
					<div id="vertical-report-items" class="sublinks">
						<li class="list-group-item"><canvas id="vertical-report"></canvas></li>
					</div>
				</ul>
			</div>

			<div id="line-report-group">
				<ul class="list-group">
					<a id="line-report-header" href="#" class="list-group-item active" onclick="onHeaderClick('line-report-group');">Request Statistics (Line Chart)<span id="line-report-span" style="float:right; font-size: 16px;" class="glyphicon glyphicon-collapse-up text-right" title="Click to collapse or expand"></span></a>
					<div id="line-report-items" class="sublinks">
						<li class="list-group-item"><canvas id="line-report"></canvas></li>
					</div>
				</ul>
			</div>

			<!--div class="panel panel-primary">
				<div class="panel-heading">Request Statistics</div>
				<div class="panel-body"><canvas id="requests-report"></canvas></div>        
			</div-->

			<div id="default-table-toolbar" class="btn-group" role="group" aria-label="Table page navigation">
				<a id="btnTableFirst" value="FIRST" class="btn btn-default" role="button" aria-disabled="true" title="Goto first page">
					<span class="glyphicon glyphicon-step-backward" style="pointer-events:none;" aria-hidden="true"></span>
				</a>
				<a id="btnTablePrev" value="PREV" class="btn btn-default" role="button" aria-disabled="true" title="Goto previous page">
					<span class="glyphicon glyphicon-triangle-left" style="pointer-events:none;" aria-hidden="true"></span>
				</a>
				<a id="btnTableNext" value="NEXT" class="btn btn-default" role="button" aria-disabled="true" title="Goto next page">
					<span class="glyphicon glyphicon-triangle-right" style="pointer-events:none;" aria-hidden="true"></span>
				</a>
				<a id="btnTableLast" value="LAST" class="btn btn-default" role="button" aria-disabled="true" title="Goto last page">
					<span class="glyphicon glyphicon-step-forward" style="pointer-events:none;" aria-hidden="true"></span>
				</a>
			</div>
			<div class="spacer8"></div>

			<div id="table-header" class="page-header">
				<h1 class="pageheadermargins">Requests By API Name</h1>
			</div>
			<table 
				id="data-table"
				data-toggle="table"
				data-url="/rest/requests.json"
				data-cache="false"
				data-page-size="10"
				data-page-list="[10, 25, 50, 100, All]"
				data-show-columns="true"
				data-show-refresh="true"
				data-show-toggle="true"
				data-single-select="true"
				data-loading-font-size="18px"
				data-loading-template="tableLoadingMessage"
				data-select-item-name="default-select-event"
				data-click-to-select="true"
				data-side-pagination="server"
				data-pagination="true"
				data-toolbar="#default-table-toolbar"
				data-show-footer="false"
				data-classes="table table-bordered table-hover table-striped">
				<thead>
					<tr>
						<th data-field="Type" data-width=85>Type</th>
						<th data-field="URL">URL</th>
						<th data-field="Requested" data-width=145>Requested</th>
						<th data-field="Datetime" data-width=165 data-formatter="dateTimeConverter">Last seen</th>
						<th data-field="Percent" data-width=65 data-formatter="percentGaugeLoader">Usage</th>
					</tr>
				</thead>
			</table>

		</div> <!-- /container -->

		<!-- Bootstrap core JavaScript
		=============================================================== -->
		<!-- Placed at the end of the document so the pages load faster -->
		<script src="/comp/jquery/3.5.1/jquery.min.js" integrity="sha384-ZvpUoO/+PpLXR1lu4jmpXWu80pZlYUAfxl5NsBMWOEPSjUn/6Z/hRTt8+pR6L4N2" crossorigin="anonymous"></script>
		<script src="/comp/bootstrap/3.4.1/dist/js/bootstrap.min.js" integrity="sha384-aJ21OjlMXNL5UyIl/XNwTMqvzeRMZH2w8c5cRVpzpU8Y5bApTppSuUkhZXN0VxHd" crossorigin="anonymous"></script>
		<script src="/comp/bootstrap/3.4.1/assets/js/ie10-viewport-bug-workaround.js" integrity="sha384-Y/KNhcDQLQRwTDdfrC7I3v4nDqBrNVlCe4M5xd8Wp2HJachg6ZBdP7SKBJ509sOa" crossorigin="anonymous"></script>
		<script src="/comp/bootstrap-table/1.17.1/dist/bootstrap-table.min.js" integrity="sha384-nNFbqpWdNhhdPeDVkanWjEBNKejyGGlTKQDMEAEGus5cDGzZLbh5rWo43RhMxjHX" crossorigin="anonymous"></script>
		<script src="/comp/chartjs/dist/js/Chart.min.js" integrity="sha384-i+dHPTzZw7YVZOx9lbH5l6lP74sLRtMtwN2XjVqjf3uAGAREAF4LMIUDTWEVs4LI" crossorigin="anonymous"></script>

		<!-- Place own JavaScripts here (jQuery loaded before!)
		=============================================================== -->
		<script src="/app/dist/js/functions.min.js"></script>
		<script src="/app/dist/js/messagedialog.min.js"></script>
		<script src="/app/dist/js/playlistmanager.min.js"></script>
		<script src="/app/dist/js/mainmenu.min.js"></script>
		<script src="/app/dist/js/tableview.min.js"></script>
		<script src="/app/dist/js/swipe.min.js"></script>
		<script src="/app/dist/js/requests.min.js"></script>
		<script>

			// Get system ISO693 language name, e.g. 'de-DE'
			var syslang = getSystemLanguage();

			// Convert datetime table entries to human readable strings
			function dateTimeConverter(value, row, index) {
				var time = new Date(value);
				var dates = { day: '2-digit', month: '2-digit', year: 'numeric' };
				var times = { hour12: false, hour: '2-digit', minute: '2-digit', second: '2-digit' };
				return time.toLocaleDateString(syslang, dates) + " " + time.toLocaleTimeString(syslang, times);
			}

			// Show server redered progress bar
			function percentGaugeLoader(value, row, index) {
				var percent = row.Percent.toString();
				var text = percent + ' &percnt;';
				html = text + '<br><img id="img-percent" style="display:block; margin:0; margin-top:2px; border:none; box-shadow:none;" percent="' + percent + '" src="/rest/percent.png?' + 'size=' + text.length.toString() + '&' + 'percent=' + percent + '&' + createUniqueUriParam() + '">';
				return html;
			}

			function tableLoadingMessage(loadingMessage) {
			  return '<span class="loading-wrap">' +
				'<span class="loading-text">' +
				'Loading request statistics, please wait ' +
				'</span>' +
				'<span class="glyphicon glyphicon-refresh normal-right-spinner">' +
				'</span>'
			}

			// Set mouse events
			// setTableEvents();
			setStatusCollapseEvents();
			setNavigationEvents();
			setSwipeEvents();

			// Set active main menu item
			$(document).ready(function () {

				// Set active main menu item
				setActiveMenuItem('#mn-system');
				setMainMenuSwipeEvents();

				// Do Apple iOS tweaks for href links
				redirectApplicationLinks();

				// Draw reports
				// Chart.defaults.global.defaultFontFamily = "system-ui";
				drawDoughnutRequestsReport("doughnut-report-1", 3);
				drawDoughnutRequestsReport("doughnut-report-2", 4);
				drawDoughnutRequestsReport("doughnut-report-3", 5);
				drawHorizontalRequestsReport();
				drawVerticalRequestsReport();
				drawLineRequestsReport();
			});

		</script>
	</body>
</html>
